<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Dunder Methods - Python by Example</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Dunder Methods";
        var mkdocs_page_input_path = "examples\\15_dunder_methods.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Python by Example
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../01_hello_world/">Hello World</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02_variables/">Variables</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03_comments/">Comments</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../04_operators/">Operators</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05_user_input/">User Input</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../06_control_flow/">Control Flow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07_functions/">Functions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08_classes/">Classes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09_docstrings/">Docstrings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../10_debugging/">Debugging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11_oop_pillars/">OOP Pillars</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../12_solid_principles/">SOLID Principles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../13_logging/">Logging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../14_exceptions/">Exceptions</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Dunder Methods</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#demo-iterator">Demo Iterator</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-arithmetic-operators">Dunder Arithmetic Operators</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-attributes">Dunder Attributes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-builtin-types">Dunder Builtin Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-context-manager">Dunder Context Manager</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-customize-behavior">Dunder Customize Behavior</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-iterator-protocol">Dunder Iterator Protocol</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-object-representation">Dunder Object Representation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dunder-operator-overloading">Dunder Operator Overloading</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#snippets">Snippets</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../16_data_types/">Data Types</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../17_import_system/">Import System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../18_linting_tools/">Linting Tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../19_test_frameworks/">Test Frameworks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../20_package_managers/">Package Managers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../21_design_patterns/">Design Patterns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../23_meta_classes/">Meta Classes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../24_generators/">Generators</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../25_coroutines/">Coroutines</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../28_optimization/">Optimization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../29_packaging/">Packaging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../30_compatibility/">Compatibility</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Project</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../project/">Python by Example Documentation</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Python by Example</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Examples</li>
      <li class="breadcrumb-item active">Dunder Methods</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/braboj/tutorial-python/edit/master/docs/examples/15_dunder_methods.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="dunder-methods">Dunder Methods</h1>
<h2 id="demo-iterator">Demo Iterator</h2>
<pre><code class="language-python"># Dunder methods and iteration
# ---------------------------------------------------------------------------
# Demonstrates how special methods customize iteration behavior.
# * An iterable implements __iter__ returning an iterator.
# * An iterator implements __iter__ returning itself and __next__ returning
#   the next element.
# https://www.pythontutorial.net/advanced-python/python-iterator-vs-iterable/


##################################################################################################
# ITERABLE CLASS
##################################################################################################

class Colors(object):
    def __init__(self):
        self.rgb = ['red', 'green', 'blue']

    def __iter__(self):
        return ColorIterator(self)


##################################################################################################
# ITERATOR CLASS
##################################################################################################

class ColorIterator(object):
    def __init__(self, colors):
        self.__colors = colors
        self.__index = 0

    def __iter__(self):
        return self

    def __next__(self):
        self.next()

    def next(self):
        try:
            color = self.__colors.rgb[self.__index]
            self.__index += 1
        except IndexError:
            raise StopIteration

        return color


##################################################################################################
# DEMO
##################################################################################################

c = Colors()
print(c)

c_iter = iter(c)
print(c_iter)

for element in c:
    print(element)
</code></pre>
<h2 id="dunder-arithmetic-operators">Dunder Arithmetic Operators</h2>
<pre><code class="language-python"># Dunder methods for arithmetic operators
# ---------------------------------------------------------------------------
# By defining special arithmetic methods, objects can participate in Python's
# numeric operations. These dunder hooks let a class customize how instances
# respond to +, -, *, and other operators.

class Complex(object):

    def __init__(self, real, imag):
        self.real = float(real)
        self.imag = float(imag)

    def __add__(self, other):
        return Complex(
            real=self.real + other.real,
            imag=self.imag + other.imag
        )

    def __sub__(self, other):
        return Complex(
            real=self.real - other.real,
            imag=self.imag - other.imag
        )

    def __mul__(self, other):
        return Complex(
            real=self.real * other.real,
            imag=self.imag * other.imag
        )

    def __divmod__(self, other):
        return Complex(
            real=self.real % other.real,
            imag=self.imag % other.imag
        )

    def __truediv__(self, other):
        return Complex(
            real=self.real / other.real,
            imag=self.imag / other.imag
        )

    def __floordiv__(self, other):
        return Complex(
            real=self.real // other.real,
            imag=self.imag // other.imag
        )


a = Complex(1, 2)
b = Complex(3, 4)

z = a + b
print(z.real, z.imag)
</code></pre>
<h2 id="dunder-attributes">Dunder Attributes</h2>
<pre><code class="language-python"># Dunder methods for attribute access
# ---------------------------------------------------------------------------
# Attribute related dunder methods such as __getattr__, __setattr__ and
# __delattr__ give objects dynamic control over attribute access. They enable
# customized lookup, assignment and deletion behavior.

class Complex(object):

    def __init__(self, real, imag):
        self.real = float(real)
        self.imag = float(imag)

    def __setattr__(self, key, value):
        print(&quot;Setting attribute: {} = {}&quot;.format(key, value))

    def __delattr__(self, item):
        print(&quot;Deleting attribute: {}&quot;.format(item))

    def __getattr__(self, item):
        print(&quot;Getting attribute: {}&quot;.format(item))
        return item

z = Complex(1, 2)
setattr(z, &quot;real&quot;, 3)
delattr(z, &quot;real&quot;)
print(getattr(z, &quot;real&quot;))
</code></pre>
<h2 id="dunder-builtin-types">Dunder Builtin Types</h2>
<pre><code class="language-python"># Dunder methods for object representation
# ---------------------------------------------------------------------------
# Built-in type conversion functions like bool(), int() and bytes() call
# corresponding dunder methods on objects. Implementing these hooks lets a
# class define how it converts to fundamental Python types.

import struct
import math


class Point(object):

    def __init__(self, x, y):
        self.x = float(x)
        self.y = float(y)
        self.__length = self._calc_length()

    def _calc_length(self):
        return math.sqrt(self.x ** 2 + self.y ** 2)

    def __bool__(self):
        return bool(self.x or self.y)

    def __int__(self):
        return int(self._calc_length())

    def __float__(self):
        return float(self._calc_length())

    def __complex__(self):
        return complex(self.x, self.y)

    def __bytes__(self):
        return bytes(int(self.__length))


c = Point(1, 2)
print(&quot;Point({}, {})&quot;.format(c.x, c.y))
print(&quot;bool(c)    : {}&quot;.format(bool(c)))
print(&quot;int(c)     : {}&quot;.format(int(c)))
print(&quot;float(c)   : {}&quot;.format(float(c)))
print(&quot;complex(c) : {}&quot;.format(complex(c)))
print(&quot;bytes(c)   : {}&quot;.format(bytes(c)))
</code></pre>
<h2 id="dunder-context-manager">Dunder Context Manager</h2>
<pre><code class="language-python"># Dunder methods for context manager
# ---------------------------------------------------------------------------
# The __enter__ and __exit__ methods allow an object to define its own
# setup and teardown logic when used in a with-statement. This example shows
# how implementing these hooks customizes resource management behavior.

class Complex(object):

    def __init__(self, real, imag):
        self.real = float(real)
        self.imag = float(imag)

    def __enter__(self):
        print(&quot;&gt;&gt;&gt; Inside __enter__&quot;)
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print(&quot;&gt;&gt;&gt; Inside __exit__&quot;)
        print(&quot; Execution type:&quot;, exc_type)
        print(&quot; Execution value:&quot;, exc_val)
        print(&quot; Traceback:&quot;, exc_tb)

        if exc_type is not None:
            print(&quot;\nException occurred&quot;)
            return True
        else:
            print(&quot;\nNo exception occurred&quot;)
            return False


with Complex(1, 0) as c:
    print(&quot;&gt;&gt;&gt; Inside with block&quot;)
    print(c.real, c.imag)
    print(c.real / 0)
</code></pre>
<h2 id="dunder-customize-behavior">Dunder Customize Behavior</h2>
<pre><code class="language-python"># Dunder methods for customizing object behavior
# ---------------------------------------------------------------------------
# This script demonstrates several special methods that hook into object
# creation, calling and destruction. Implementing these dunder methods lets a
# class take control over how instances are created, invoked and cleaned up.

class TestClass(object):

    def __init__(self):
        print(&quot;I'm initialized!&quot;)
        self.name = &quot;DunderClass&quot;

    def __new__(cls, *args, **kwargs):
        print(&quot;I'm created!&quot;)
        return super(TestClass, cls).__new__(cls)

    def __call__(self, *args, **kwargs):
        print(&quot;I'm called! My name is {}&quot;.format(self.name))

    def __del__(self):
        print(&quot;I'm deleted!&quot;)


# Create and initialize an instance of DunderClass
test = TestClass()

# Call the instance
test()

# Delete the instance
del test
</code></pre>
<h2 id="dunder-iterator-protocol">Dunder Iterator Protocol</h2>
<pre><code class="language-python"># Dunder methods for the iterator protocol
# ---------------------------------------------------------------------------
# Special (dunder) methods allow objects to integrate with Python features.
# By implementing __iter__ and __next__, this class customizes iteration
# behavior so that instances work seamlessly in for-loops and other iterable
# contexts.

class Stack(object):

    def __init__(self):
        self._items = []
        self._index = -1

    def push(self, item):
        self._items.append(item)

    def pop(self):
        try:
            return self._items.pop()
        except IndexError:
            raise IndexError(&quot;Pop from an empty stack&quot;)

    def __iter__(self):
        return self

    def __next__(self):
        try:
            next_item = self._items[self._index]
            self._index -= 1
            return next_item

        except IndexError:
            raise StopIteration


s = Stack()
s.push(1)
s.push(2)
s.push(3)

for item in s:
    print(item)
</code></pre>
<h2 id="dunder-object-representation">Dunder Object Representation</h2>
<pre><code class="language-python"># Dunder methods for object representation
# ---------------------------------------------------------------------------
# Special representation methods like __repr__ and __str__ let objects control
# how they are displayed. This example highlights how these hooks customize the
# string and byte output of a class.

import struct


class Point(object):

    def __init__(self, x, y):
        self.x = float(x)
        self.y = float(y)

    def __repr__(self):
        return &quot;Point(x={}, y={})&quot;.format(self.x, self.y)

    def __str__(self):
        return &quot;({}, {})&quot;.format(self.x, self.y)

    def __format__(self, format_spec):
        fmt = &quot;({:&quot; + format_spec + &quot;} + {:&quot; + format_spec + &quot;})&quot;
        fmt = fmt.format(self.x, self.y)
        return fmt

    def __hash__(self):
        return hash((self.x, self.y))

    def __bytes__(self):
        result = []
        for item in (self.x, self.y):
            result.extend(struct.pack(&quot;!f&quot;, item))

        return bytes(result)


p = Point(1, 2)
print(hash(p))
print(repr(p))
print(str(p))
print(&quot;{:.3f}&quot;.format(p))
print(bytes(p))
</code></pre>
<h2 id="dunder-operator-overloading">Dunder Operator Overloading</h2>
<pre><code class="language-python"># Dunder methods for operator overloading
# ---------------------------------------------------------------------------
# Overloading arithmetic operators with dunder methods allows custom classes
# to behave like built-in numeric types. The following Point class defines
# how instances react to +, -, * and other operations.

class Point(object):

    def __init__(self, x, y):
        self.x = float(x)
        self.y = float(y)

    def __add__(self, other):
        return Point(
            x=self.x + other.x,
            y=self.y + other.y
        )

    def __sub__(self, other):
        return Point(
            x=self.x - other.x,
            y=self.y - other.y
        )

    def __mul__(self, other):
        return Point(
            x=self.x * other.x,
            y=self.y * other.y
        )

    def __divmod__(self, other):
        return Point(
            x=self.x % other.x,
            y=self.y % other.y
        )

    def __truediv__(self, other):
        return Point(
            x=self.x / other.x,
            y=self.y / other.y
        )

    def __floordiv__(self, other):
        return Point(
            x=self.x // other.x,
            y=self.y // other.y
        )


a = Point(1, 2)
b = Point(3, 4)

z = a + b
print(z.x, z.y)
</code></pre>
<h2 id="snippets">Snippets</h2>
<pre><code class="language-python"># Demonstration of special methods
# ---------------------------------------------------------------------------
# Various dunder methods show how objects integrate with Python features

class DunderClass(object):

    def __init__(self):
        pass

    def __new__(cls, *args, **kwargs):
        pass

    def __call__(self, *args, **kwargs):
        pass
    # ---------------------------------------------------------------------------------------------
    # - Context manager
    # ---------------------------------------------------------------------------------------------

    def __enter__(self):
        pass

    def __exit__(self, exc_type, exc_val, exc_tb):
        pass

    # ---------------------------------------------------------------------------------------------
    # - Iterator protocol
    # ---------------------------------------------------------------------------------------------

    def __iter__(self):
        pass

    def __next__(self):
        pass

    # ---------------------------------------------------------------------------------------------
    # - Class decorators
    # ---------------------------------------------------------------------------------------------

    def __setattr__(self, key, value):
        pass

    def __delattr__(self, item):
        pass

    def __getattr__(self, item):
        pass

    # ---------------------------------------------------------------------------------------------
    # - Class representation
    # ---------------------------------------------------------------------------------------------

    def __str__(self):
        pass

    def __repr__(self):
        pass

    def __bytes__(self):
        pass

    def __sizeof__(self):
        pass

    # ---------------------------------------------------------------------------------------------
    # - Overload comparison operators
    # ---------------------------------------------------------------------------------------------

    def __eq__(self, other):
        pass

    def __gt__(self, other):
        pass

    def __ge__(self, other):
        pass

    def __lt__(self, other):
        pass

    def __le__(self, other):
        pass

    # ---------------------------------------------------------------------------------------------
    # - Overload arithmetic operators
    # ---------------------------------------------------------------------------------------------
    def __add__(self, other):
        pass

    def __sub__(self, other):
        pass

    def __mul__(self, other):
        pass

    def __divmod__(self, other):
        pass

    def __truediv__(self, other):
        pass

    def __floordiv__(self, other):
        pass
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../14_exceptions/" class="btn btn-neutral float-left" title="Exceptions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../16_data_types/" class="btn btn-neutral float-right" title="Data Types">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/braboj/tutorial-python" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../14_exceptions/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../16_data_types/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
